/**
* @package 		EasySocial
* @copyright	Copyright (C) 2010 - 2013 Stack Ideas Sdn Bhd. All rights reserved.
* @license 		Proprietary Use License http://stackideas.com/licensing.html
* @author 		Stack Ideas Sdn Bhd
**/
/*------------------------------------*\
	$story - story.less
\*------------------------------------*/

/*
shortcode
.es-story>.es-story-form>form>textarea+(.es-story-panels>.es-story-panelbuttons+.es-story-panelbutton)+(.es-story-panelcontents>.es-story-panelcontent)^.row>button.btn{Share}
*/
.dashboard-story-wrapper {
	padding-top: 15px;
}
.es-story
{
	position: relative;
	border-radius: 3px;
	background: @esStoryBackground;
	border: 1px solid @esStoryBorder;
	overflow: hidden; 
	height: 46px;
	z-index: 7;
	.transition(all 0.5s ease 0s);

	// due to layout changed issues #1283 class name conflict with Rockettheme need to rethink

	> .loading-indicator
	{
		display: none;
		background: url("@{media_uri}/images/loading.gif") center no-repeat @esStoryLoadingBackground;
		width: 100%;
		height: 100%;
		top: 0;
		left: 0;
		position: absolute;
		z-index: 2;
	}
	
	//elements
	.es-avatar {
		position: absolute;
		top: 2px;
		left: 2px;
		.transition(all 0.2s ease 0s);
	}

	.btn-es-story
	{
		position: absolute;
		right: 0;
		top: 0;
		font-size: 13px;
		padding: 8px 12px;
	}

	[data-message-group] .alert {
		margin: 0;
		border-radius: ~"3px 3px 0px 0px";
		border-top: 0px;
		border-left: 0px;
		border-right: 0px;
	}
	
	.btn-es-story
	{
		display: none;
		.transition(all 0.2s ease 0s);
	}
	.es-story-panel-top {
		// display: none;
		// .opacity(0);
		height: 0;
		.transition(all 0.2s ease 0s);
		// -webkit-transform: scaleY(0);
		// -o-transform: scaleY(0);
		// -ms-transform: scaleY(0);
		// transform: scaleY(0);

		// -webkit-transform-origin: top;
		// -o-transform-origin: top;
		// -ms-transform-origin: top;
		// transform-origin: top;
		
		overflow: hidden;
	}
	.es-story-header
	{
		.es-story-content
		{
			padding-left: 46px;
			.transition(all 0.2s ease 0s);
			
		}
	}

	.es-story-meta
	{
		background: #fff;
		border-top: 1px solid #d7d7d7;

		input
		{
			font-size: 11px;
		}

		.story-users
		{
			border-right: 1px solid #d7d7d7;
			// padding: 7px 0 0 20px;
			height: 32px;
			
			> [class^="ies-"] {
				position: absolute;
				top: 10px;
				left: 25px;
			}

			.es-story-friends-textbox
			{
				border: 0;
				display: inline-block;
				width: 94%;
				min-height: 24px;
				font-size: 11px;
				margin: 0;
				padding: 0;
				position: relative;
				top: 6px;
				left: 28px;
				line-height: 22px;

				>.textboxlist-textField
				{
					float: none;
					font-size: 11px !important;
					height: auto !important;
					line-height: auto !important;	
				}

				.textboxlist-item
				{
					height: auto;

					.textboxlist-itemContent
					{
						img
						{
							margin-top: -4px !important;
						}
					}
					.textboxlist-itemRemoveButton
					{
						i
						{
							margin-top: -2px !important;
						}
					}
				}
			}
		}
		.story-location
		{
			// padding: 0 12px 0 10px;
			
			> [class^="ies-"] {
				position: absolute;
				top: 10px;
			}

			.location-form
			{
				display: inline-block;
				box-shadow: none;
				border: 0;
				padding: 0;
				width: 94%;

				.es-story-location-textbox
				{
					padding: 0 !important;
					display: inline-block !important;
					width: 88%;
					position: relative;
					left: 20px;

					>input
					{
						min-height: 32px;
						padding: 0 26px 0 0; // reserve padding for detect btn
						width: 100%;
						height: 32px !important;
						display: inline-block;
					}
				}

				.detect-location
				{
					border-radius: 3px;
					box-shadow: none;
					border: 1px solid #d7d7d7;
					font-size: 11px;
					padding: 3px 6px; 
					text-align: center;
					position: absolute;
					top: 4px;

					>i
					{
						color: #5580BE;
						margin: 0;
						position: relative;
					}
				}
			}

		}

		i
		{
			vertical-align: middle;
			margin-right: 5px;
			color: #d7d7d7;
		}
	}

	.es-story-textfield
	{
		font-size: 14px;
		line-height: 42px;
		.transition(font-size 0.5s ease 0s);
	}

	&.no-transition
	{
		.transition(none);
	}

	&.saving {
		> .loading-indicator {
			display: block;
		}
	}

	.es-story-section
	{
		.clearfix();
		position: relative;
		z-index: 2;
	}

	.es-story-content
	{
		position: relative;
		overflow: hidden;
		margin: 0;
		.es-story-textbox .mentions > div {
			min-height: 42px;
			position: relative;
		}
		form
		{
			margin: 0;
		}

		textarea
		{
			width: 100%;
			margin: 0;
			border: none;
			resize: none;
			background: @esStoryTextfieldBackground;
			.getContrast(@esStoryTextfieldBackground);
		}
	}
	
	//hide
	.es-story-meta,
	.es-story-footer {
		.opacity(0);
	}

	/*------------------------------------*\
		$ACTIVE STATE
	\*------------------------------------*/
	&.active {
		height: 138px;
		&.expanded {
			height: auto;
    		overflow: visible;
    		.es-avatar {
    			display: none;
    		}
    		.es-story-panel-top {
    			// .opacity(1);
    			
    			//-webkit-transform: scaleY(1);
				// -o-transform: scaleY(1);
				// -ms-transform: scaleY(1);
				// transform: scaleY(1);

    			// height: 40px;
    			// .transition(all 0.2s ease 0s);
    		}
		}
		//show
		.es-story-meta,
		.es-story-footer {
			.opacity(1);
		}
		.es-story-panel-top {
			// display: block;
			height: 40px;
			border-bottom: 1px solid @esBorder;
			// .transition(all 0.2s ease 0s);
			overflow: visible;
			.es-story-content {
				overflow: visible;
			}
		}

		.btn-es-story
		{
			display: block;
			.transition(all 0.2s ease 0s);
		}
		
		.es-avatar {
			left: -44px;
			.opacity(0);
		}
		.es-story-header
		{
			background: @esStoryTextfieldBackground;

			.es-story-content
			{
				border-radius: 3px;
				padding: 10px;
				padding-right: 16px + 10px; // 16px remove button is takes 5px from each side
			}
		}

		.es-story-footer
		{
			border-top: 1px solid #d7d7d7;
			// padding-top: 0px;
			z-index: 1;
			.clearfix();

			.es-story-panel-buttons {
				height: 40px;
			}
			
			&.active
			{
				// border-top: 0;

				.es-story-panel-buttons
				{
					margin-top: -1px;
					
				}
			}
		}

		.es-story-textbox
		{
			.mentions > div
			{
				position: relative;
				min-height: 42px;
			}
		}

		.es-story-textfield
		{
			.box-shadow(~"none");
			font-size: 12px;
			line-height: 16px;
			overflow: hidden;
		}
		
		// attach and share button group
		.es-story-actions
		{ 
			margin: 8px 15px 0 0;
			position: absolute;
			right: 0;
			bottom: 6px;
			z-index: 2;
			.clearfix();

			&.without-privacy
			{
				.es-story-action-submit
				{
					>.es-story-submit
					{
						border-radius: 3px !important;	
					}
				}
			}

			.es-story-action-submit
			{
				display: inline-block;
				position: relative;
				vertical-align: middle;
			}

			.es-privacy-toggle,
			.es-privacy-toggle:focus
			{
				padding-left: 5px;
				border-radius: 0 3px 3px 0;
				margin-left: -1px;
				float: left;
				.button-variant(#fff; @btnEsPrimaryBackground; @btnEsPrimaryBackgroundHighlight) !important;

				// .buttonBackground(@btnEsPrimaryBackground, @btnEsPrimaryBackgroundHighlight);
				[class^="ies-"],
				[class*=" ies-"]
				{
					position: relative;
					top: -1px;
				}
				.caret {
					border-left: 3px solid rgba(0, 0, 0, 0);
					border-right: 3px solid rgba(0, 0, 0, 0);
					border-top: 3px solid #fff;
					margin: 8px 0 0;

				}
			}
		}

		.es-story-submit
		{
			border-radius: 4px !important;
			float: left;
			padding: 8px 14px;
			height: 34px;
			font-size: 12px;
			line-height: 14px;
			z-index: 3;
			text-transform: none;

			&:hover
			{
				background-position: 0 -2px;
			}

			> i
			{
				font-size: 11px;
			}
		}	
		
		.es-story-privacy
		{
			float: right;
			z-index: 2;

			.es-privacy
			{
				margin-left: -33px;
			}

			.es-privacy-toggle
			{
				height: 34px;
				line-height: 34px;
				margin: 0; // Some templates have margin
			}

			.es-privacy-menu {
				top: 22px;
			}
		}

		.es-story-submit
		{
			padding: 4px 12px;
			height: 26px;
			.box-shadow(inset -1px 0px 0px rgba(255,255,255,.1));
			border-radius: 3px 0 0 3px !important;
		}

		.es-story-privacy
		{
			.es-privacy
			{
				margin-left: -1px;
				overflow: visible;
			}

			.es-privacy-toggle
			{
				height: 26px;
				line-height: 26px;
			}
		}

		.es-story-reset-button {
			display: block;
			line-height: 10px;
		}
	}//active
	

	

	
	
	.es-story-reset-button
	{
		float: right;
		position: absolute;
		top: 0px;
		right: 0px;
		z-index: 2;
		padding: 6px 10px 3px; // Give it a larger area to press
		cursor: pointer;
		display: none;
		margin-left: -1px;
		text-shadow: none;
		color: @esColor;
		> i {
			font-size: 8px;
		}
	}
}

// Responsive
&.w480 {
	.es-story {
		.es-story-meta {
			.row {
				margin: 0;
			}
			
			.story-users {
				border-right: 0;
				border-bottom: 1px solid @esBorder;
				> [class^="ies-"] {
					left: 10px;
				}
				.es-story-friends-textbox {
					left: 18px;
				}
			}
			.story-location {
				> [class^="ies-"] {
					left: 10px;
				}
				.location-form {
					width: 100%;
					.es-story-location-textbox {
						width: 90%;
						left: 18px;
					}
				}
			}
		}
	}
	
}
&.w320
{
	.es-story
	{
		.es-story-actions
		{
			position: relative;
			float: right;
			margin-top: 10px;
		}
	}
}
