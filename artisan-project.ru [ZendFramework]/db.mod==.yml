tables:
  factories: # Фабрики
    fields:
      id: {type: smallint, notnull: 1, unsigned: 1, auto_increment: 1}
      title: {type: varchar, length: 64, am: {title: Название, type: string}}
      country_id: {type: int, unsigned: 1, am: {type: select, title: Страна}}
      import_title: {type: tinytext, am: {title: Название из файла импорта, type: string}}
      descr: {type: text, notnull: 0, am: {type: shtml, req: 0, title: Описание}}
      url: {type: varchar, length: 64, notnull: 0, am: {type: string, title: ЧПУ}}
      image: {type: tinytext, am: {type: image, title: Логотип}}
      hidden: {type: "enum('yes','no')", notnull: 1, am: {type: string, title: Видимость, htmltype: checkbox, default: 'no', checked: 'yes', otitle: 'Скрывать', values: {no: показано, yes: скрыто}}}
    table:
      PRIMARY KEY: id
      KEYS:
        country_id: [country_id]
        hidden: [hidden]
    images:
      image:
        small: {w: 87, h: 87, ratio: 'x', cut: 0}
    foreign:
      country_title: {table: countries, field: title, use_ref: factories2countries, am: {type: string, title: Страна}}
    actions:
      list: [id, country_title, title, import_title, hidden]
      show: [country_id, title, import_title, descr, image, hidden]
      add: [country_id, title, url, import_title, descr, image, hidden]
      modify: [country_id, import_title, title, url, descr, image, hidden]
      selection: [id, title]
      show_factory: [id, url, country_id, title, descr, image]
      list_factory: [id, url, country_id, country_title, title, descr, image]

 content:
    fields:
      id: {type: int, length: 10, auto_increment: 1, notnull: 1, am: {type: integer}}
      pid: {type: int, length: 10, notnull: 1, am: {type: integer, title: Родительский раздел, htmltype: select}}
      pos: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, htmltype: hidden}}
      path: {type: tinytext, notnull: 1, am: {type: string, req: 1, title: Адрес страницы}}
      link: {type: tinytext, notnull: 0, am: {type: string, title: Модуль(ctrl/action)}}
      title: {type: tinytext, notnull: 1, am: {type: string, req: 1, title: Заголовок}}
      description: {type: tinytext, notnull: 0, am: {type: string, req: 0, title: Описание}}
      content: {type: longtext, notnull: 1, am: {type: html, htmltype: html, req: 1, title: Текст}}
      in_menu: {type: "enum('yes','no')", default: 'no', notnull: 1, am: {type: string, title: Отображать в меню, otitle: Отображать, htmltype: checkbox, default: 'no', checked: 'yes', values: {no: нет, yes: да}}}
      hidden: {type: "enum('yes','no')", default: 'no', notnull: 1, am: {type: string, title: Скрытый, otitle: Скрыть, htmltype: checkbox, default: 'no', checked: 'yes', values: {no: нет, yes: да}}}
    table:
      PRIMARY KEY: id
    foreign:
      pid_ttl: {table: content, field: title, use_ref: content2content, am: pid}
    actions:
      list: [id, pos, path, title, in_menu, hidden]
      show: [pid, path, title, hidden, description, in_menu, content]
      modify: [title, pid, path, link, description, content, in_menu, hidden]
      modify_main: [title, description, content]
      add: [pid, title, path, link, pos, description, content, in_menu, hidden]
      menu: [id, pid, path, link, title, description]
	  

  rekvisites: # Реквизиты
    fields:
      id: {type: smallint, notnull: 1, unsigned: 1, auto_increment: 1}
      title: {type: text, am: {title: Название, type: string}}
      text: {type: text, am: {type: string, title: Текст}}
    table:
      PRIMARY KEY: id
    actions:
      list: [id, title, text]
      show: [title, text]
      add: [title, text]
      modify: [title, text]
      selection: [id, title]
      show_factory: [id, title, text]
      list_factory: [id, title, text]
	  	  
  bank_rekvisites: # Банковские реквизиты
    fields:
      id: {type: smallint, notnull: 1, unsigned: 1, auto_increment: 1}
      title: {type: text, am: {title: Название, type: string}}
      text: {type: text, am: {type: string, title: Текст}}
    table:
      PRIMARY KEY: id
    actions:
      list: [id, title, text]
      show: [title, text]
      add: [title, text]
      modify: [title, text]
      selection: [id, title]
      show_factory: [id, title, text]
      list_factory: [id, title, text]

#merchandising_docs: # Мерчандайзинг
#    fields:
#      id: {type: smallint, notnull: 1, unsigned: 1, auto_increment: 1}
#      title: {type: text, am: {title: Название, type: string}}
#      art: {type: text, unsigned: 1, am: {type: string, title: Артикул}}
#      url: {type: text, notnull: 0, am: {type: string, title: Ссылка на документ}}
#      image: {type: text, am: {type: string, title: Изображение}}
#    table:
#      PRIMARY KEY: id
#    actions:
#      list: [id, title, art, url, image]
#      show: [title, art, url, image]
#      add: [title, art, url, image]
#      modify: [title, art, url, image]
#      selection: [id, title, art, url, image]
#      show_factory: [id, title, art, url, image]
#      list_factory: [id, title, art, url, image]



  merchandising_docs: # Контакты
    fields:
      id: {type: smallint, notnull: 1, unsigned: 1, auto_increment: 1}
      title: {type: text, am: {title: Название, type: string}}
      art: {type: text, am: {type: string, title: Артикул}}
      url: {type: text, am: {type: string, title: Ссылка на документ}}
      image: {type: text, am: {type: string, title: Изображение}}
    table:
      PRIMARY KEY: id
    actions:
      list: [id, title, id_otdel, content, map, mail]
      show: [title, id_otdel, content, map, mail]
      add: [title, id_otdel, content, map, mail]
      modify: [title, id_otdel, content, map, mail]
      selection: [id, title]
      show_factory: [id, title, id_otdel, content, map, mail]
      list_factory: [id, title, id_otdel, content, map, mail]



  contacts: # Контакты
    fields:
      id: {type: smallint, notnull: 1, unsigned: 1, auto_increment: 1}
      title: {type: text, am: {title: Название, type: string}}
      id_otdel: {type: text, am: {type: string, title: Идентификатор отдела}}
      content: {type: text, am: {type: string, title: Текст}}
      map: {type: text, am: {type: string, title: Карта}}
      mail: {type: text, am: {type: string, title: email}}
    table:
      PRIMARY KEY: id
    actions:
      list: [id, title, id_otdel, content, map, mail]
      show: [title, id_otdel, content, map, mail]
      add: [title, id_otdel, content, map, mail]
      modify: [title, id_otdel, content, map, mail]
      selection: [id, title]
      show_factory: [id, title, id_otdel, content, map, mail]
      list_factory: [id, title, id_otdel, content, map, mail]

 
  collections: # Коллекции
    fields:
      id: {type: int, length: 10, auto_increment: 1, notnull: 1, am: {type: integer}}
      factory_id: {type: int, unsigned: 1, am: {type: select, title: Фабрика}}
      title: {type: tinytext, notnull: 0, am: {type: string, req: 1, title: Название}}
      import_title: {type: tinytext, am: {title: Название из файла импорта, type: string}}
      image: {type: tinytext, am: {type: image, title: Логотип}}
      descr: {type: text, notnull: 0, am: {type: shtml, req: 0, title: Описание}}
      url: {type: varchar, length: 64, notnull: 0, am: {type: string, title: ЧПУ}}
      layout:
        type: longtext
        am:
          type: ckhtml
          title: Раскладка
          custom_buttons:
            - 
              - addGood
              - addGoodBtn()
              - Добавить товар
              - btnAddGood.gif
          features: ['|', addGood]
          toolbar: [[CreatePlaceholder_ext]]
          extraPlugins: placeholder_ext
      action: {type: "enum('yes','no')", default: 'no', notnull: 1, am: {type: string, title: Акция, otitle: Да, htmltype: checkbox, default: 'no', checked: 'yes'}}
      date_start_action: {type: datetime, am: {type: date, title: 'Дата старта акции'}}
      date_end_action: {type: datetime, am: {type: date, title: 'Дата окончания акции'}}
      action_goods_id:
        virtual: 1
        ref_to:
          idFieldName: id
          virtual: 1
          table: ?_goods
          fields: [id, title]
          use_ref: collections2goods
        am: {type: checkboxes, title: Товары для акции}
      sale: {type: "enum('yes','no')", default: 'no', notnull: 1, am: {type: string, title: Распродажа, otitle: Да, htmltype: checkbox, default: 'no', checked: 'yes'}}
      date_start_sale: {type: datetime, am: {type: date, title: 'Дата старта распродажи'}}
      date_end_sale: {type: datetime, am: {type: date, title: 'Дата окончания распродажи'}}
      sale_goods_id:
        virtual: 1
        ref_to:
          idFieldName: id
          virtual: 1
          table: ?_goods
          fields: [id, title]
          use_ref: collections2goods
        am: {type: checkboxes, title: Товары для распродажи}
      novice: {type: "enum('yes','no')", default: 'no', notnull: 1, am: {type: string, title: Новинка, otitle: Да, htmltype: checkbox, default: 'no', checked: 'yes'}}
      date_start_novice: {type: datetime, am: {type: date, title: 'Дата старта новинки'}}
      date_end_novice: {type: datetime, am: {type: date, title: 'Дата окончания новинки'}}
      novice_goods_id:
        virtual: 1
        ref_to:
          idFieldName: id
          virtual: 1
          table: ?_goods
          fields: [id, title]
          use_ref: collections2goods
        am: {type: checkboxes, title: Товары для Новинок}
      hidden: {type: "enum('yes','no')", notnull: 1, am: {type: string, title: Видимость, htmltype: checkbox, default: 'no', checked: 'yes', otitle: 'Скрывать', values: {no: показано, yes: скрыто}}}
      types:
        virtual: 1
        ref_to:
          idFieldName: id
          virtual: 1
          assoc: 1
          table: ?_types
          fields: [id, title]
          use_ref: collections2types
        am: {type: checkboxes, title: Тип}
      purposes:
        virtual: 1
        ref_to:
          idFieldName: id
          virtual: 1
          table: ?_purposes
          fields: [id, title]
          use_ref: collections2purposes
        am: {type: checkboxes, title: Назначение}
      surfaces:
        virtual: 1
        ref_to:
          idFieldName: id
          virtual: 1
          table: ?_surfaces
          fields: [id, title]
          use_ref: collections2surfaces
        am: {type: checkboxes, title: Поверхность}
      styles:
        virtual: 1
        ref_to:
          idFieldName: id
          virtual: 1
          table: ?_styles
          fields: [id, title]
          use_ref: collections2styles
        am: {type: checkboxes, title: Стиль}
      colors:
        virtual: 1
        ref_to:
          idFieldName: id
          virtual: 1
          table: ?_colors
          fields: [id, title]
          use_ref: collections2colors
        am: {type: checkboxes, title: Цвет}
      materials:
        virtual: 1
        ref_to:
          idFieldName: id
          virtual: 1
          table: ?_materials
          fields: [id, title]
          use_ref: collections2materials
        am: {type: checkboxes, title: Материал}
      images:
        virtual: 1
        ref_to:
          virtual: 1
          table: ?_images
          fields: [id, title, image]
          use_ref: images2collections
        am: {type: checkboxes, req: 0, title: Фотогалерея}
    table:
      PRIMARY KEY: id
      KEYS:
        factory_id: [factory_id, hidden]
    foreign:
      factory_title: {table: factories, field: title, use_ref: collections2factories, am: {type: string, title: Фабрика}}
      factory_country_id: {table: factories, field: country_id, use_ref: collections2factories}
      factory_url: {table: factories, field: url, use_ref: collections2factories}
      good_id: {table: goods, field: id, use_ref: collections2goods}
    images:
      image:
        small: {w: 120, h: 120, ratio: 'x', cut: 1}
        medium: {w: 200, h: 200, ratio: 'x', cut: 1}
    actions:
      add: [factory_id, title, url, import_title, descr, image, types, purposes, surfaces, styles, colors, materials, hidden]
      modify: [factory_id, title, url, import_title, descr, image, types, purposes, surfaces, styles, colors, materials, hidden]
      show: [title, import_title, descr, image, action, sale, novice, hidden]
      list: [id, factory_title, title, action, sale, novice, hidden]
      layout: [title, layout]
      selection: [id, factory_id, title]
      collections: [id, url, title, image, action, sale, novice]
      list_coll: [id, url, title, image, factory_id, action, sale, novice, date_start_action, date_end_action, date_start_sale, date_end_sale, date_start_novice, date_end_novice]
      list_coll_action: [id, url, title, image, factory_id, factory_title, factory_url, action, sale, novice, date_start_action, date_end_action, date_start_sale, date_end_sale, date_start_novice, date_end_novice]
      actions_coll: [id, factory_id, factory_url, factory_title, url, title, image, action, sale, novice]
      search: [id, factory_id, title]
      search_coll: [id, url, title, image, good_id, factory_id, factory_url, factory_title, factory_country_id, types, purposes, surfaces, styles, colors, materials, action, sale, novice]
      show_coll: [id, url, factory_id, factory_url, factory_title, title, descr, image, images, action, sale, novice, layout]
      new_coll: [id, url, factory_id, factory_url, factory_title, title, image]
      list_for_good: [id, title]
      form_list: [date_start_action, date_end_action, date_start_sale, date_end_sale, date_start_novice, date_end_novice, action_goods_id, sale_goods_id, novice_goods_id]
      modify_action: [date_start_action, date_end_action, date_start_sale, date_end_sale, date_start_novice, date_end_novice, action, sale, novice]
    paging:
      npp: 50
      npps: [10, 20, 50, 100, all]
      css_class: 'paging'
      base_url: ''
      url_append: ''
      separator: ' '
      linkcount: 10
      first: ''
      prev: ''
      next: ''
      last: ''
      skip: ' ... '

  goods: # Товары
    fields:
      id: {type: int, notnull: 1, unsigned: 1, auto_increment: 1}
      art: {type: varchar, length: 16, am: {title: Артикул, type: string}}
      title: {type: tinytext, am: {title: Наименование, type: string}}
      ftitle: {type: tinytext, am: {type: string, title: Товар}}
      collection_id: {type: smallint, unsigned: 1, am: {type: string, title: Коллекция}}
      collection:
        virtual: 1
        ref_to:
          idFieldName: id
          virtual: 1
          table: ?_collections
          fields: [id, title, url]
          use_ref: goods2collectionsN-M
        am: {type: checkboxes, title: Коллекция}
      type: {type: tinytext, am: {title: Тип, type: string}}
      unit_id: {type: tinyint, unsigned: 1, am: {title: Базовая ед, type: string}}
      size: {type: tinytext, am: {title: Размер, type: string}}
      width: {type: decimal, length: '10,2', unsigned: 1, am: {title: Ширина, type: string}}
      length: {type: decimal, length: '10,2', unsigned: 1, am: {title: Длина, type: string}}
      weight: {type: decimal, length: '10,2', unsigned: 1, am: {title: Масса упаковки(коробки), type: string}}
      packCntByUnit: {type: decimal, length: '10,4', unsigned: 1, am: {title: 'Кол-во/Кор.', type: float}}
      packCntByArea: {type: decimal, length: '10,4', unsigned: 1, am: {title: 'Кол-во кв. м. в коробке', type: float}}
      packCntByCount: {type: decimal, length: '10,4', unsigned: 1, am: {title: 'Кол-во штук плитки в коробке', type: float}}
      url: {type: tinytext, am: {type: string, title: Каталог}}
      non_liquid: {type: tinyint, unsigned: 1, default: 0, notnull: 1, am: {type: select, title: Неликвид, default: 0, values: {0: Нет, 1: Да}}}
      photo: {type: tinytext, notnull: 0, am: {type: image, req: 0, title: Изображение}}
      action: {type: "enum('yes','no')", default: 'no', notnull: 1, am: {type: string, title: Акция, otitle: Да, htmltype: checkbox, default: 'no', checked: 'yes'}}
      sale: {type: "enum('yes','no')", default: 'no', notnull: 1, am: {type: string, title: Распродажа, otitle: Да, htmltype: checkbox, default: 'no', checked: 'yes'}}
      novice: {type: "enum('yes','no')", default: 'no', notnull: 1, am: {type: string, title: Новинка, otitle: Да, htmltype: checkbox, default: 'no', checked: 'yes'}}
      updated: {type: "enum('yes','no')", default: 'yes', notnull: 1, am: {type: string, title: Обновлено при импорте, otitle: Да, htmltype: checkbox, default: 'no', checked: 'yes'}}
      hidden: {type: "enum('yes','no')", default: 'no', notnull: 1, am: {type: string, title: Видимость, htmltype: checkbox, default: 'no', checked: 'yes', otitle: 'Скрывать', values: {no: показано, yes: скрыто}}}
      prices:
        virtual: 1
        ref_to:
          idFieldName: id
          assoc: 1
          virtual: 1
          table: ?_prices2goods
          fields: [price_id, price]
          use_ref: goods2prices
        am: {title: Цены}
      remains:
        virtual: 1
        ref_to:
          idFieldName: id
          assoc: 1
          virtual: 1
          table: ?_remains
          fields: [store_id, stock, reserve]
          use_ref: goods2remains
        am: {title: Остатки}
      similar:
        virtual: 1
        ref_to:
          idFieldName: id
          virtual: 1
          table: ?_goods2
          fields: [id, art, title, ftitle]
          use_ref: goods2similar
        am: {title: Аналоги}
    table:
      PRIMARY KEY: id
      KEYS:
        #collection_id: [collection_id]
        unit_id: [unit_id]
        art: [art]
    foreign:
      factory_id: {table: collections, field: factory_id, use_ref: goods2collections}
      factory_url: {table: factories, field: url, use_ref: goods2factories, via: collections}
      factory_title: {table: factories, field: title, use_ref: goods2factories, via: collections, am: {type: string, title: Фабрика}}
      collection_url: {table: collections, field: url, use_ref: goods2collections, am: {type: string, title: Коллекция}}
      collection_title: {table: collections, field: title, use_ref: goods2collections, am: {type: string, title: Коллекция}}
      unit_title: {table: units, field: title, use_ref: goods2units, am: {type: string, title: 'Ед. изм.'}}
    actions:
      list: [id, factory_id, factory_title, collection_title, title, art, action, sale, novice]
      show: [collection_title, factory_title, title, ftitle, type, packCntByUnit, unit_title, packCntByCount, weight, width, length, non_liquid, url]
      selection: [id, art, factory_id, factory_title, factory_url, collection_id, collection_title, collection_url, title, packCntByUnit, unit_title, url, prices, remains]
      selection_list: [id, art, factory_title, collection_title, title, packCntByUnit, unit_title, url, prices, remains]
      selection_request: [id, art, title, ftitle, collection_url, collection_id, factory_url, factory_id, remains, packCntByUnit, packCntByArea, packCntByCount, unit_title, prices, weight, non_liquid, similar]
      search: [id, art, title, type]
      search_several_coll: [id, art, title, type, collection]
      cart_search: [id, title, price]
      good_one: [id, title, ftitle, unit_id, photo, action, sale, novice]
      cart: [id, factory_id, factory_url, factory_title, collection_url, collection_title, title, ftitle, price, weight, packCntByCount, packCntByArea, unit_id, available, type_presence]
      modify: [id, collection]
      modify_action: [id, action, sale, novice]
      modify_action_several_coll: [id, action, sale, novice, collection]
    paging:
      npp: 50
      css_class: 'paging'
      base_url: ''
      url_append: ''
      separator: ' '
      linkcount: 10
      first: ''
      prev: ''
      next: ''
      last: ''
      skip: ' ... '

  goods2collectionsNM:
    fields:
      good_id: {type: int, length: 10, notnull: 1}
      collection_id: {type: int, length: 10, notnull: 1}
    table:
      KEYS:
        link: [good_id, collection_id]

  goods_to_order: # Товары на заказ
    fields:
      id: {type: int, notnull: 1, unsigned: 1, auto_increment: 1}
      art: {type: varchar, length: 16, am: {title: Артикул, type: string}}
      title: {type: tinytext, am: {title: Наименование, type: string}}
      collection_id: {type: smallint, unsigned: 1, am: {type: string, title: Коллекция}}
      type: {type: tinytext, am: {title: Тип, type: string}}
      size: {type: tinytext, am: {title: Размер, type: string}}
      weight: {type: decimal, length: '10,2', unsigned: 1, am: {title: 'вес/кор', type: string}}
      packCntByUnit: {type: decimal, length: '10,4', unsigned: 1, am: {title: 'Кол-во/Кор.', type: float}}
      packCntByArea: {type: decimal, length: '10,4', unsigned: 1, am: {title: 'м2/кор', type: float}}
      packCntByCount: {type: decimal, length: '10,4', unsigned: 1, am: {title: 'шт/кор', type: float}}
      unit_id: {type: tinyint, unsigned: 1, am: {title: Базовая ед, type: string}}
      colprice2: {type: decimal, length: '15,2', unsigned: 1, am: {title: КолЦена2, type: float}}
      price1: {type: decimal, length: '15,2', unsigned: 1, am: {title: Цена1, type: float}}
      price2: {type: decimal, length: '15,2', unsigned: 1, am: {title: Цена2, type: float}}
      max_sk: {type: tinyint, unsigned: 1, am: {title: MaxSk, type: string}}
      updated: {type: "enum('yes','no')", default: 'yes', notnull: 1, am: {type: string, title: Обновлено при импорте, otitle: Да, htmltype: checkbox, default: 'no', checked: 'yes'}}
      hidden: {type: "enum('yes','no')", default: 'no', notnull: 1, am: {type: string, title: Видимость, htmltype: checkbox, default: 'no', checked: 'yes', otitle: 'Скрывать', values: {no: показано, yes: скрыто}}}
    table:
      PRIMARY KEY: id
      KEYS:
        #collection_id: [collection_id]
        unit_id: [unit_id]
        art: [art]
    foreign:
      factory_id: {table: collections, field: factory_id, use_ref: goods_to_order2collections}
      factory_url: {table: factories, field: url, use_ref: goods_to_order2factories, via: collections}
      factory_title: {table: factories, field: title, use_ref: goods_to_order2factories, via: collections, am: {type: string, title: Фабрика}}
      collection_url: {table: collections, field: url, use_ref: goods_to_order2collections, am: {type: string, title: Коллекция}}
      collection_title: {table: collections, field: title, use_ref: goods_to_order2collections, am: {type: string, title: Коллекция}}
      unit_title: {table: units, field: title, use_ref: goods_to_order2units, am: {type: string, title: 'Ед. изм.'}}
    actions:
      selection: [id, art, factory_id, factory_title, factory_url, collection_id, collection_title, collection_url, title, packCntByUnit, packCntByCount, unit_title, price1, price2, max_sk, size, weight, colprice2]
      selection_list: [id, art, factory_title, collection_title, title, packCntByArea, packCntByCount, unit_title, url, price1, price2, colprice2, size, weight]
      selection_request: [id, art, title, ftitle, collection_url, collection_id, factory_url, factory_id, packCntByUnit, packCntByArea, packCntByCount, unit_title, price1, price2, weight, colprice2, max_sk]
      list: [id, factory_id, factory_title, collection_title, title, art]
      show: [collection_title, factory_title, title, ftitle, packCntByUnit, unit_title, packCntByCount, weight]
      modify: [id, collection]
    paging:
      npp: 50
      css_class: 'paging'
      base_url: ''
      url_append: ''
      separator: ' '
      linkcount: 10
      first: ''
      prev: ''
      next: ''
      last: ''
      skip: ' ... '

  goods_to_order2collectionsNM:
    fields:
      goods_to_order_id: {type: int, length: 10, notnull: 1}
      collection_id: {type: int, length: 10, notnull: 1}
    table:
      KEYS:
        link: [goods_to_order_id, collection_id]

  promotional:
    fields:
      id: {type: tinyint, notnull: 1, unsigned: 1, auto_increment: 1}
      factory_id: {type: int, unsigned: 1, am: {type: select, null: не выбрано, req: 1, title: Фабрика}}
      collection_id: {type: int, unsigned: 1, am: {type: select, null: не выбрано, title: Коллекция}}
      typespromotional_id: {type: int, unsigned: 1, am: {type: select, title: Вид рекламной продукции}}
      expired_from: {type: date, notnull: 1, am: {type: date, title: Дата актуальности от, req: 1}}
      expired_to: {type: date, notnull: 1, am: {type: date, title: Дата актуальности по, req: 1}}
      file: {type: tinytext, notnull: 0, am: {type: file, title: Файл}}
      hidden: {type: "enum('yes','no')", default: 'no', notnull: 1, am: {type: string, title: Скрытая, otitle: Скрыть, htmltype: checkbox, default: 'no', checked: 'yes', values: {no: нет, yes: да}}}
      cabinet: {type: "enum('yes','no')", default: 'no', notnull: 1, am: {type: string, title: Отображать только в ЛК , htmltype: checkbox, default: 'no', checked: 'yes', values: {no: нет, yes: да}}}
    table:
      PRIMARY KEY: id
    foreign:
      factory_title: {table: factories, field: title, use_ref: promotional2factories, am: {type: select, title: Фабрика}}
      collection_title: {table: collections, field: title, use_ref: promotional2collections, am: {type: select, title: Коллекция}}
      typespromotional_title: {table: typespromotional, field: title, use_ref: promotional2typespromotional, am: {type: select, title: Вид РП}}
    actions:
      add: [factory_id, collection_id, typespromotional_id, expired_from, expired_to, file, hidden, cabinet]
      modify: [factory_id, collection_id, typespromotional_id, expired_from, expired_to, file, hidden, cabinet]
      show: [id, factory_id, collection_id, typespromotional_id, expired_from, expired_to, file, hidden, cabinet]
      list: [id, factory_id, collection_id, typespromotional_id, expired_from, expired_to, file, hidden, cabinet]
      promotionals: [id, factory_id, factory_title, collection_id, collection_title, typespromotional_id, typespromotional_title, expired_from, expired_to, file]

  typespromotional:
    fields:
      id: {type: int, length: 10, auto_increment: 1, notnull: 1, am: {type: integer}}
      title: {type: tinytext, notnull: 1, am: {type: string, req: 1, title: Название}}
    table:
      PRIMARY KEY: id
    actions:
      add: [title]
      modify: [title]
      show: [title]
      list: [id, title]

  based_sizes:
    fields:
      id: {type: int, length: 10, auto_increment: 1, notnull: 1, am: {type: integer}}
      title: {type: tinytext, notnull: 1, am: {type: string, req: 1, title: Название}}
    table:
      PRIMARY KEY: id
    actions:
      add: [title]
      modify: [title]
      show: [title]
      list: [id, title]

  text_blocks:
    fields:
      id: {type: int, length: 10, auto_increment: 1, notnull: 1, am: {type: integer}}
      text: {type: text, notnull: 1, am: {type: html, htmltype: html, req: 1, title: Текст}}
    table:
      PRIMARY KEY: id
    actions:
      add: [text]
      modify: [text]
      show: [text]
      list: [id, text]

  types: # ТИП
    fields:
      id: {type: int, length: 10, auto_increment: 1, notnull: 1, am: {type: integer}}
      title: {type: tinytext, notnull: 1, am: {type: string, req: 1, title: Название}}
      detail_title: {type: tinytext, notnull: 1, am: {type: string, req: 1, title: Полное название}}
      import_title: {type: tinytext, am: {title: Название из файла импорта, type: string}}
    table:
      PRIMARY KEY: id
    actions:
      add: [title, detail_title]
      modify: [title, detail_title]
      show: [title, detail_title]
      list: [id, title, detail_title]
  collections2types:
    fields:
      type_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Назначение}}
      collection_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Категория}}
    table:
      UNIQUE:
        collection_type: [collection_id, type_id]

  purposes: # Назначения
    fields:
      id: {type: int, length: 10, auto_increment: 1, notnull: 1, am: {type: integer}}
      title: {type: text, notnull: 1, am: {type: string, req: 1, title: Название}}
      detail_title: {type: text, notnull: 1, am: {type: string, req: 1, title: Полное название}}
      image: {type: tinytext, am: {title: Изображение, type: image}}
    table:
      PRIMARY KEY: id
    actions:
      add: [title, detail_title, image]
      modify: [title, detail_title, image]
      show: [title, detail_title, image]
      list: [id, title, detail_title, image]
    images:
      image:
        small: {w: 150, h: 150, ratio: 'x', cut: 0}

 # purposes: # Назначения
 #   fields:
 #     id: {type: int, length: 10, auto_increment: 1, notnull: 1, am: {type: integer}}
 #     title: {type: tinytext, notnull: 1, am: {type: string, req: 1, title: Название}}
 #   table:
 #     PRIMARY KEY: id
 #   actions:
 #     add: [title]
 #     modify: [title]
 #     show: [title]
 #     list: [id, title]

  collections2purposes:
    fields:
      purpose_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Назначение}}
      collection_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Категория}}
    table:
      UNIQUE:
        collection_type: [collection_id, purpose_id]

  collections2merchandising_docs:
    fields:
      merchandising_doc_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Документ}}
      collection_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Коллекция}}
    table:
      UNIQUE:
        collection_type: [merchandising_doc_id, collection_id]


#  collections2merchandising_docs:
#	fields:
#     merchandising_doc_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: }}
#      collection_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Категория}}
#    table:
#      UNIQUE:
#        collection_type: [collection_id, purpose_id]


  goods2purposes:
    fields:
      purpose_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Назначение}}
      good_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Товар}}
    table:
      UNIQUE:
        good_type: [good_id, purpose_id]

  goods2materials:
    fields:
      material_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Материал}}
      good_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Товар}}
    table:
      UNIQUE:
        good_type: [good_id, material_id]

  goods2styles:
    fields:
      style_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Стиль}}
      good_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Товар}}
    table:
      UNIQUE:
        good_type: [good_id, style_id]

  goods2surfaces:
    fields:
      surface_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Поверхность}}
      good_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Товар}}
    table:
      UNIQUE:
        good_type: [good_id, surface_id]

  goods2colors:
    fields:
      color_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Цвет}}
      good_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Товар}}
    table:
      UNIQUE:
        good_type: [good_id, color_id]

  goods2recommended:
    fields:
      id: {type: int, length: 10, auto_increment: 1, notnull: 1, am: {type: integer}}
      good_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Товар}}
    table:
      PRIMARY KEY: id


  images2purposes:
    fields:
      purpose_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Назначение}}
      images: {type: text, am: {type: string, title: Изображение}}
    table:
      PRIMARY KEY: id

  images2materials:
    fields:
      material_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Материал}}
      images: {type: text, am: {type: string, title: Изображение}}
  
 # surfaces: # Поверхности
 #   fields:
 #     id: {type: int, length: 10, auto_increment: 1, notnull: 1, am: {type: integer}}
 #     title: {type: tinytext, notnull: 1, am: {type: string, req: 1, title: Название}}
 #   table:
 #     PRIMARY KEY: id
 #   actions:
 #     add: [title]
 #     modify: [title]
 #     show: [title]
 #     list: [id, title]


  surfaces: # Поверхности
    fields:
      id: {type: tinyint, notnull: 1, unsigned: 1, auto_increment: 1}
      image: {type: text, notnull: 0, am: {type: image, title: Изображение}}
      title: {type: text, am: {title: Название, type: string}}
      detail_title: {type: text, am: {title: Полное название, type: string}}
    table:
      PRIMARY KEY: id
    actions:
      add: [image, detail_title, title]
      modify: [image, detail_title, title]
      show: [image, detail_title, title]
      list: [id, image, detail_title, title]
      show_country: [id, image, detail_title, title]
    images:
      image:
        small: {w: 150, h: 150, ratio: 'x', cut: 0}  



#   styles: # Стили 
#    fields:
#      id: {type: int, length: 10, auto_increment: 1, notnull: 1, am: {type: integer}}
#      title: {type: tinytext, notnull: 1, am: {type: string, req: 1, title: Название}}
#    table:
#      PRIMARY KEY: id
#    actions:
#      add: [title]
#      modify: [title]
#      show: [title]
#      list: [id, title]

  styles: # Стили
    fields:
      id: {type: tinyint, notnull: 1, unsigned: 1, auto_increment: 1}
      image: {type: text, notnull: 0, am: {type: image, title: Изображение}}
      title: {type: text, am: {title: Название, type: string}}
      detail_title: {type: text, am: {title: Полное название, type: string}}
    table:
      PRIMARY KEY: id
    actions:
      add: [image, detail_title, title]
      modify: [image, detail_title, title]
      show: [image, detail_title, title]
      list: [id, image, detail_title, title]
      show_country: [id, image, detail_title, title]
     images:
      image:
        small: {w: 150, h: 150, ratio: 'x', cut: 0}    



#  colors: # Цвета 
#    fields:
#      id: {type: int, length: 10, auto_increment: 1, notnull: 1, am: {type: integer}}
#      title: {type: tinytext, notnull: 1, am: {type: string, req: 1, title: Название}}
#    table:
#      PRIMARY KEY: id
#    actions:
#      add: [title]
#      modify: [title]
#      show: [title]
#      list: [id, title]


  colors: # Цвета
    fields:
      id: {type: tinyint, notnull: 1, unsigned: 1, auto_increment: 1}
      color: {type: text, notnull: 0, am: {type: string, title: Цвет}}
      title: {type: text, am: {title: Название, type: string}}
      detail_title: {type: text, am: {title: Полное название, type: string}}
    table:
      PRIMARY KEY: id
    actions:
      add: [color, title, detail_title]
      modify: [color, title, detail_title]
      show: [ color, title, detail_title]
      list: [id, color, title, detail_title]
      show_country: [id, color, title, detail_title]
   





  collections2surfaces:
    fields:
      surface_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Идентификатор поверхности}}
      collection_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Идентификатор коллекции}}
    table:
      UNIQUE:
        collection_type: [collection_id, surface_id]

  collections2colors:
    fields:
      color_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Идентификатор цвета}}
      collection_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Идентификатор коллекции}}
    table:
      UNIQUE:
        collection_type: [collection_id, color_id]

  collections2styles:
    fields:
      style_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Идентификатор стиля}}
      collection_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Идентификатор коллекции}}
    table:
      UNIQUE:
        collection_type: [collection_id, style_id]


#  materials: # материалы
#    fields:
#      id: {type: int, length: 10, auto_increment: 1, notnull: 1, am: {type: integer}}
#      title: {type: tinytext, notnull: 1, am: {type: string, req: 1, title: Название}}
#    table:
#      PRIMARY KEY: id
#    actions:
#      add: [title]
#      modify: [title]
#      show: [title]
#      list: [id, title]

  materials: # материалы
    fields:
      id: {type: int, length: 10, auto_increment: 1, notnull: 1, am: {type: integer}}
      title: {type: text, notnull: 1, am: {type: string, req: 1, title: Название}}
      detail_title: {type: text, notnull: 1, am: {type: string, req: 1, title: Полное название}}
      image: {type: text, am: {title: Изображение, type: image}}
    table:
      PRIMARY KEY: id
    actions:
      add: [title, detail_title, image]
      modify: [title, detail_title, image]
      show: [title, detail_title, image]
      list: [id, title, detail_title, image]
     images:
      image:
        small: {w: 150, h: 150, ratio: 'x', cut: 0}  
		
  collections2materials:
    fields:
      material_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Назначение}}
      collection_id: {type: int, length: 10, unsigned: 1, notnull: 1, am: {type: integer, title: Категория}}
    table:
      UNIQUE:
        collection_type: [collection_id, material_id]

  units: # Базовые единицы
    fields:
      id: {type: tinyint, notnull: 1, unsigned: 1, auto_increment: 1}
      title: {type: varchar, length: 32, am: {title: Название, type: string}}
    table:
      PRIMARY KEY: id

  prices:
    fields:
      id: {type: tinyint, notnull: 1, unsigned: 1, auto_increment: 1}
      title: {type: varchar, length: 32, am: {title: Название, type: string}}
    table:
      PRIMARY KEY: id

  prices2goods:
    fields:
      good_id: {type: int, notnull: 1, unsigned: 1, am: {title: Код товара, type: string}}
      price_id: {type: int, notnull: 1, unsigned: 1, am: {type: integer, title: Цена}}
      price: {type: decimal, length: '15,2', unsigned: 1, am: {title: Цена, type: float}}
    table:
      UNIQUE:
        good_id: [good_id, price_id]
    foreign:
      price_title: {table: prices, field: title, use_ref: prices2goods2price}
    actions:
      for_goods: [price_title, price]

  based_sizes2goods:
    fields:
      good_id: {type: int, notnull: 1, unsigned: 1, am: {title: Код товара, type: string}}
      based_size_id: {type: int, notnull: 1, unsigned: 1, am: {type: integer, title: Код базового размера}}

  based_sizes2collections:
    fields:
      collection_id: {type: int, notnull: 1, unsigned: 1, am: {title: Код коллекции, type: string}}
      based_size_id: {type: int, notnull: 1, unsigned: 1, am: {type: integer, title: Код базового размера}}

  similar_goods:
    fields:
      good_id: {type: int, notnull: 1, unsigned: 1, am: {title: Код товара, type: string}}
      sgood_id: {type: int, notnull: 1, unsigned: 1, am: {title: Код товара, type: string}}
    table:
      UNIQUE:
        good_sgood: [good_id, sgood_id]
      
  stores: # склады
    fields:
      id: {type: int, notnull: 1, unsigned: 1, auto_increment: 1, am: {type: integer, title: Код склада}}
      title: {type: varchar, length: 128, am: {title: Название, type: string}}
      delivery_date: {type: date, am: {type: date, title: Дата поставки}}
      status: {type: "enum('main','road','service')", am: {type: select, title: Статус, values: {main: Основной, road: В дороге, service: Служебный}}}
    table:
      PRIMARY KEY: id
    actions:
      order: [id, title, delivery_date, status]
  
  remains: #остатки
    fields:
      good_id: {type: int, notnull: 1, unsigned: 1, am: {title: Код товара, type: string}}
      store_id: {type: int, notnull: 1, unsigned: 1, am: {type: integer, title: Код склада}}
      stock: {type: float, am: {type: float, title: Свободный остаток}}
      reserve: {type: float, am: {type: float, title: Резерв на складе}}
    table:
      UNIQUE:
        goods_code: [good_id, store_id]
    foreign:
      goods_title: {table: goods, field: title, use_ref: remains2goods}
      store_title: {table: stores, field: title, use_ref: remains2stores}
    actions:
      for_goods: [store_title, stock, reserve]

  countries: # Страны
    fields:
      id: {type: tinyint, notnull: 1, unsigned: 1, auto_increment: 1}
      url: {type: varchar, length: 64, notnull: 0, am: {type: string, title: ЧПУ}}
      title: {type: varchar, length: 16, am: {title: Название, type: string}}
      mtitle: {type: tinytext, am: {type: string, title: Название в меню}}
      descr: {type: text, notnull: 0, am: {type: shtml, req: 0, title: Описание}}
      import_title: {type: tinytext, am: {title: Название из файла импорта, type: string}}
      flag: {type: tinytext, am: {type: image, title: Флаг}}
    table:
      PRIMARY KEY: id
    actions:
      add: [url, flag, title, mtitle, import_title, descr]
      modify: [url, flag, title, mtitle, import_title, descr]
      show: [url, flag, title, mtitle, import_title, descr]
      list: [id, url, flag, title, mtitle, import_title]
      show_country: [id, url, title, mtitle, import_title, descr, flag]
    images:
      flag:
        icon: {w: 16, h: 16, ratio: 'x', cut: 0}
  
  images:
    fields:
      id: {type: int, notnull: 1, auto_increment: 1, unsigned: 1, am: {type: integer}}
      model: {type: varchar, length: 16, notnull: 1, am: {type: string, req: 1, title: Модель}}
      pid: {type: int, notnull: 0, unsigned: 1, am: {type: integer, htmltype: hidden}}
      pos: {type: int, unsigned: 1, am: {type: integer, htmltype: hidden}}
      title: {type: tinytext, notnull: 1, am: {type: string, title: Заголовок}}
      image: {type: tinytext, notnull: 1, am: {type: image, req: 0, title: Изображение}}
      hidden: {type: "enum('yes','no')", notnull: 1, default: no, am: {type: string, title: Скрытая, htmltype: radio, default: 'no', values: {yes: да, no: нет}}}
    table:
      PRIMARY KEY:  id
      KEYS:
        model: [model, pid]
        pos: [pos]
    actions:
      list: [id, title, image, model]
      modify: [title, image, hidden, model]
      add: [pos, title, image, hidden, model]
    images:
      image:
        preview: {w: 200, h: 150, ratio: 'equal', cut: 0}
        medium: {w: 400, h: 300, ratio: 'equal', cut: 0}
refs:
  collections2factories: {type: M-1, join: left, tables: {collections: factory_id, factories: id}}
  content2content: {type: M-1, self: [pid, id], join: LEFT, alias: content_title}
  collections2goods: {type: M-1, join: left, tables: {collections: id, goods: collection_id}}
  factories2countries: {type: M-1, join: left, tables: {factories: country_id, countries: id}}
  goods2factories: {type: M-1, join: left, tables: {collections: factory_id, factories: id}}
  goods2collections: {type: M-1, join: left, tables: {goods: collection_id, collections: id}}
  goods2units: {type: M-1, join: left, tables: {goods: unit_id, units: id}}
  goods_to_order2factories: {type: M-1, join: left, tables: {collections: factory_id, factories: id}}
  goods_to_order2collections: {type: M-1, join: left, tables: {goods_to_order: collection_id, collections: id}}
  goods_to_order2units: {type: M-1, join: left, tables: {goods_to_order: unit_id, units: id}}
  prices2goods2price: {type: M-1, join: left, tables: {prices2goods: price_id, prices: id}}
  promotional2factories: {type: M-1, join: left, tables: {promotional: factory_id, factories: id}}
  promotional2collections: {type: M-1, join: left, tables: {promotional: collection_id, collections: id}}
  promotional2typespromotional: {type: M-1, join: left, tables: {promotional: typespromotional_id, typespromotional: id}}
  goods2prices:
    virtual: 1
    join: left
    type: N-M
    tables:
      -
        - {table: goods, field: id}
        - {table: prices2goods, field: good_id}
      - 
        - {table: prices, field: id}
        - {table: prices2goods, field: price_id}
  goods2remains:
    virtual: 1
    join: left
    type: N-M
    tables:
      -
        - {table: goods, field: id}
        - {table: remains, field: good_id}
      -
        - {table: stores, field: id}
        - {table: remains, field: store_id}
  goods2similar:
    virtual: 1
    join: left
    type: N-M
    tables:
      -
        - {table: goods, field: id}
        - {table: similar_goods, field: good_id}
      -
        - {table: goods, alias: goods2, field: id}
        - {table: similar_goods, field: sgood_id}
  collections2factories: {type: M-1, join: left, tables: {collections: factory_id, factories: id}}
  remains2goods: {type: M-1, join: left, tables: {remains: good_id, goods: id}}
  remains2stores: {type: M-1, join: left, tables: {remains: store_id, stores: id}}
  collections2types:
    virtual: 1
    join: left outer
    type: N-M
    tables:
      - 
        - {table: collections, field: id}
        - {table: collections2types, field: collection_id}
      -
        - {table: types, field: id}
        - {table: collections2types, field: type_id}
  collections2purposes:
    virtual: 1
    join: left outer
    type: N-M
    tables:
      - 
        - {table: collections, field: id}
        - {table: collections2purposes, field: collection_id}
      -
        - {table: purposes, field: id}
        - {table: collections2purposes, field: purpose_id}
  collections2surfaces:
    virtual: 1
    join: left outer
    type: N-M
    tables:
      - 
        - {table: collections, field: id}
        - {table: collections2surfaces, field: collection_id}
      -
        - {table: surfaces, field: id}
        - {table: collections2surfaces, field: surface_id}
  collections2styles:
    virtual: 1
    join: left outer
    type: N-M
    tables:
      - 
        - {table: collections, field: id}
        - {table: collections2styles, field: collection_id}
      -
        - {table: styles, field: id}
        - {table: collections2styles, field: style_id}		
  collections2colors:
    virtual: 1
    join: left outer
    type: N-M
    tables:
      - 
        - {table: collections, field: id}
        - {table: collections2colors, field: collection_id}
      -
        - {table: colors, field: id}
        - {table: collections2colors, field: color_id}		
  collections2materials:
    virtual: 1
    join: left outer
    type: N-M
    tables:
      - 
        - {table: collections, field: id}
        - {table: collections2materials, field: collection_id}
      -
        - {table: materials, field: id}
        - {table: collections2materials, field: material_id}
  images2collections:
    virtual: 1
    join: left outer
    type: N-M
    tables:
      - 
        - {table: collections, field: id}
        - {table: images, field: pid, cond: {model: collections}}

  goods2collectionsN-M:
    virtual: 1
    join: left outer
    type: N-M
    tables:
      -
        - {table: goods, field: id}
        - {table: goods2collectionsNM, field: good_id}
      -
        - {table: goods2collectionsNM, field: collection_id}
        - {table: collections, field: id}